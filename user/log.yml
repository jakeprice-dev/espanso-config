# ****************************************************************************
# Espanso: Personal Log Shortcuts
# ****************************************************************************

name: log
parent: default

global_vars:

  - name: log_entry_id
    type: date
    params:
      format: "%Y%m%d%H%M%S"

  - name: uuid
    type: shell
    params:
      cmd: echo $(uuidgen) | awk '{print tolower($0)}'
      shell: bash

  - name: log_entry_timestamp_full
    type: date
    params:
      format: "%Y-%m-%d %H:%M:%S"

  - name: log_entry_timestamp
    type: date
    params:
      format: "%Y-%m-%d %H:%M"

  - name: log_entry_date
    type: date
    params:
      format: "%Y-%m-%d"

  - name: log_calendar_date
    type: date
    params:
      format: "%Y-%m-%d %a"

matches:
  # Log - Entry Frontmatter:
  - trigger: ":fm"
    force_clipboard: true
    replace: |
      ---
      id: {{log_entry_id}}
      uuid: {{uuid}}
      title: 
      date: {{log_entry_timestamp_full}}
      modified: {{log_entry_timestamp_full}}
      types: 
      link: 
      pinned: false
      tags: []
      draft: false
      ---
      
      $|$

  # Log - Inbox Entry:
  - trigger: ":inbox"
    force_clipboard: true
    replace: |
      ---

      id: {{log_entry_id}} date: {{log_entry_timestamp_full}}

      $|$

  # Log - Table of Contents:
  - trigger: ":toc"
    force_clipboard: true
    replace: |
      \{\{<toc>\}\}

  # Log - Entry Admonition:
  - trigger: ":adm"
    force_clipboard: true
    replace: |
      \{\{<admonition $|$>\}\}
      
      \{\{</admonition>\}\}

  # Log - Embed HTML:
  - trigger: ":embed"
    force_clipboard: true
    replace: |
      \{\{<embed_html file="/attachments/$|$">\}\}

  # Dates
  - trigger: ":date"
    force_clipboard: true
    replace: "{{log_entry_date}}"
  - trigger: ":fulldate"
    force_clipboard: true
    replace: "{{log_entry_timestamp_full}}"
  - trigger: ":caldate"
    force_clipboard: true
    replace: "{{log_calendar_date}}"

