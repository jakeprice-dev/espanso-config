# ****************************************************************************
# Espanso: Personal Log Shortcuts
# ****************************************************************************

name: log
parent: default

global_vars:
  - name: log_entry_id
    type: date
    params:
      format: "%Y%m%d%H%M%S"
  - name: uuid
    type: shell
    params:
      cmd: echo $(uuidgen) | awk '{print tolower($0)}'
      shell: bash
  - name: log_entry_timestamp_full
    type: date
    params:
      format: "%Y-%m-%d %H:%M:%S"
  - name: log_entry_timestamp
    type: date
    params:
      format: "%Y-%m-%d %H:%M"
  - name: log_entry_date
    type: date
    params:
      format: "%Y-%m-%d"
  - name: log_calendar_date
    type: date
    params:
      format: "%Y-%m-%d %a"
  - name: log_bookmark_link
    type: clipboard

matches:
  # Log - Entry Frontmatter:
  - trigger: ":fm"
    replace: |
      ---
      id: {{log_entry_id}}
      uuid: {{uuid}}
      title: 
      date: {{log_entry_timestamp_full}}
      updated: 
      types: 
      pinned: false
      tags: []
      draft: false
      ---
      
      $|$

  # Log - Inbox Entry:
  - trigger: ":inbox"
    replace: |
      ---

      id: {{log_entry_id}} date: {{log_entry_timestamp_full}}

      $|$

  # Log - New Bookmark:
  - trigger: ":link"
    replace: "- {{log_entry_timestamp}} {{log_bookmark_link}}"

  # Log - Entry Admonition:
  - trigger: ":adm"
    replace: |
      \{\{<admonition $|$>\}\}
      
      \{\{</admonition>\}\}

  # Dates
  - trigger: ":date"
    replace: "{{log_entry_date}}"
  - trigger: ":caldate"
    replace: "{{log_calendar_date}}"

  - trigger: ":bookmark"
    replace: |
      - title: "$|$"
        url: 
        tags: 
        date: {{log_entry_date}}

